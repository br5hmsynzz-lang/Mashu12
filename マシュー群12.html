<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M12 ç½®æ›ãƒ‘ã‚ºãƒ« - Challenge</title>
    <style>
        body { 
            font-family: 'Helvetica Neue', Arial, sans-serif; 
            display: flex; flex-direction: column; align-items: center; 
            background-color: #1e1e2f; color: #ffffff; padding: 20px;
        }
        h1 { margin-bottom: 5px; color: #ffcc00; }
        .counter { font-size: 1.2rem; margin-bottom: 20px; color: #aaa; }
        
        .container {
            width: 100%; overflow-x: auto; padding: 20px 0;
            display: flex; justify-content: center;
        }
        .grid { display: flex; gap: 8px; padding: 10px; }
        
        .card { 
            min-width: 45px; height: 65px; background: #2d2d44; 
            border: 2px solid #555; border-radius: 6px;
            display: flex; justify-content: center; align-items: center; 
            font-size: 1.3rem; font-weight: bold; color: #fff;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); transition: 0.2s;
        }
        
        .correct { border-color: #00ff88; color: #00ff88; background: #2d443a; }

        .controls { margin-top: 30px; }
        button { 
            padding: 15px 30px; font-size: 1.1rem; cursor: pointer; margin: 10px; 
            border-radius: 50px; border: none; font-weight: bold;
            transition: all 0.2s; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .btn-a { background: linear-gradient(135deg, #6e8efb, #a777e3); color: white; }
        .btn-b { background: linear-gradient(135deg, #ff9a9e, #fecfef); color: #333; }
        button:hover { transform: scale(1.05); filter: brightness(1.1); }
        button:active { transform: scale(0.95); }

        .status { margin-top: 20px; font-size: 1.4rem; font-weight: bold; height: 1.5em; }
        .info-box { 
            margin-top: 40px; padding: 15px; background: rgba(255,255,255,0.05); 
            border-radius: 10px; font-size: 0.85rem; color: #ccc; max-width: 500px;
        }
    </style>
</head>
<body>

    <h1>M12 ç½®æ›ãƒ‘ã‚ºãƒ«</h1>
    <div class="counter" id="counter">Moves: 0</div>
    
    <div class="container">
        <div class="grid" id="board"></div>
    </div>

    <div class="controls">
        <button class="btn-a" onclick="applyPermutation('a')">æ“ä½œ a</button>
        <button class="btn-b" onclick="applyPermutation('b')">æ“ä½œ b</button>
    </div>

    <div class="status" id="status"></div>

    <div class="info-box">
        <strong>éŠã³æ–¹:</strong><br>
        2ã¤ã®æ“ä½œã‚’çµ„ã¿åˆã‚ã›ã¦ã€æ•°å­—ã‚’å·¦ã‹ã‚‰ 1, 2, ..., 12 ã®é †ã«ä¸¦ã¹ã¦ãã ã•ã„ã€‚
        åˆæœŸçŠ¶æ…‹ã¯ $M_{12}$ ã®è¦ç´ ã«ã‚ˆã£ã¦ãƒ©ãƒ³ãƒ€ãƒ ã«ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã•ã‚Œã¦ã„ã¾ã™ã€‚
    </div>

    <script>
        let state = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
        const goal = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
        let moves = 0;

        // ç”Ÿæˆå…ƒ a: (1,2,3,4,5,6,7,8,9,10,11) 11ç‚¹ã¯å›ºå®š
        const permA = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 0, 11]; 
        // ç”Ÿæˆå…ƒ b: (1,10)(2,5)(3,7)(4,8)(6,9)(11,12)
        const permB = [9, 4, 6, 7, 1, 8, 2, 3, 5, 0, 11, 10];

        function render() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            state.forEach((num, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                if (num === goal[index]) card.classList.add('correct');
                card.textContent = num;
                board.appendChild(card);
            });
            document.getElementById('counter').textContent = `Moves: ${moves}`;
        }

        function applyPermutation(type, isShuffling = false) {
            const p = type === 'a' ? permA : permB;
            const newState = new Array(12);
            for (let i = 0; i < 12; i++) {
                newState[p[i]] = state[i];
            }
            state = newState;
            
            if (!isShuffling) {
                moves++;
                render();
                checkWin();
            }
        }

        function shuffle() {
            // ååˆ†ãªå›æ•°ãƒ©ãƒ³ãƒ€ãƒ ã«æ“ä½œã‚’é©ç”¨ã—ã¦åˆæœŸåŒ–
            for (let i = 0; i < 40; i++) {
                const type = Math.random() > 0.5 ? 'a' : 'b';
                applyPermutation(type, true);
            }
            // ä¸‡ãŒä¸€æœ€åˆã‹ã‚‰æƒã£ã¦ã—ã¾ã£ãŸå ´åˆï¼ˆç¨€ï¼‰ã¯ã‚‚ã†ä¸€åº¦
            if (state.every((val, index) => val === goal[index])) shuffle();
            render();
        }

        function checkWin() {
            if (state.every((val, index) => val === goal[index])) {
                document.getElementById('status').textContent = "ğŸ‰ CLEAR! ğŸ‰";
                document.getElementById('status').style.color = "#00ff88";
                document.querySelectorAll('button').forEach(b => b.disabled = true);
            }
        }

        // åˆæœŸå®Ÿè¡Œ
        shuffle();
    </script>
</body>
</html>
